<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>微商城</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <script type="text/javascript">
    (function (doc, win) {
        var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function () {
                    window.clientWidth = docEl.clientWidth;
                    if (!window.clientWidth) return;
                    docEl.style.fontSize = 20 * (window.clientWidth / 320) + 'px';
                    window.base = 20 * (window.clientWidth / 320);
                };

        try {
            recalc();
        } catch (e) {

        }
        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
    </script>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/main.css?v=22'">
</head>
<body>
    <div class="page" id="loading-page">
        <div class="inner">
            <div class="loading"></div>
            <p class="progress">0</p>
        </div>
    </div>
</body>
<script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="js/index.js"></script>

<script>
$(function(){
    function initScroll( sClass ){
        myScroll = new IScroll(sClass,{
            vScroll: true,
            bounce: true,
            checkDOMChanges: true,
            resizeScrollbars: true,
            iScrollIndicator: true,
            click: true
        });
    }
    function preloadimages(obj, complete_cb, progress_cb) {
        var loaded = 0;
        var toload = 0;
        var images = obj instanceof Array ? [] : {};
        toload = obj.length;
        for (var i = 0; i < obj.length; i++) {
            images[i] = new Image();
            images[i].src = obj[i];
            images[i].onload = load;
            images[i].onerror = load;
            images[i].onabort = load;
        }
        if (obj.length == 0) {
            complete_cb(images);
            console.log(images);
        }
        function load() {
            ++loaded;
            if (progress_cb) {
                progress_cb(loaded / toload);
            }
            if (loaded >= toload) {
                complete_cb(images);
            }
        }
    }
    var preloadImageList = [
        'banner1.png','banner2.png','banner3.png','bj.png','bottle_l.png','bottle_m.png',
        'bottle_s.png','bottle.png','bottom.png','btn_check.png',
        'btn_checked.png','btn1_hover.png','btn1.png','car_float.png','car0_btn.png',
        'car0.png','center_bj.png','code.png','dfk.png','dpj.png','dsh.png','ewm.png','kp.png','kpjl.png','kpxx.png','loading-logo.png','location.png','logo.png','lsjl.png','lxwm.png','message.png','product-detail.png','qbdd.png','qyfw.png','rx.png','seek.png',
        'select.png','to.png','true.png','tx.png',
        'waterL.png','waterM.png','waterS.png','wz.png','wz1.png','wz2.png','xia.png'
    ];
    for (var i = 0; i < preloadImageList.length; i++) {
        preloadImageList[i] = 'img/' + preloadImageList[i];
    }
    preloadimages(preloadImageList, function(images){
        window.location.href = 'index-home.html';
    },function(progress){
        console.log(progress);
        $('.progress').text((progress*100).toFixed(0)+'%');
    })

})

</script>
</html>
